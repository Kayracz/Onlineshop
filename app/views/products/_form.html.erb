<%= simple_form_for(@product) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

  <div class="form-inputs">
    Titulo del producto
    <%= f.input :photo %>
    <%= f.input :photo_cache, as: :hidden %>
    <%= f.input :title %>
    Descripcion del producto
    <%= f.input :description %>
    Precio
    <%= f.input :price %>
     Genero
    <%= f.input :subcategory %>
     Codigo de Promo
    <%= f.input :promo %>
    Codigo de producto
    <%= f.input :codigo %>

		Color
		<%= f.input :color, as: :hidden %>
		<%= f.select :color_picker, Product.color, onchange: "setColor()" %>
		<button type="button" onclick="newColor()">Nuevo Color</button>
    <br>
    Foto principal
    <br>
    Categoria del producto
    <br>
    <%= f.select :category, Category.all.map{ |f| [f.name, f.id] } %>
  </div>
  <br>
  <hr>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %>

	<script>
		function setColor() {
			const color = $("#product_color_picker option:selected").val()
			if (color)
				$("#product_color").val(color);
		}

		function newColor() {
			let color = prompt("Ingresa el nuevo color:");
			if (color) {
				$("#product_color").val(color);
				const $cp = $("#product_color_picker");
				$cp.append($('<option>', {
						text: color
				}));
				$cp.val(color);
			}
		}
	</script>


<br>

